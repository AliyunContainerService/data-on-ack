(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-620e21a0"],{1404:function(e,t,r){"use strict";r.r(t),r.d(t,"USER_TYPE_ADMIN",(function(){return p})),r.d(t,"USER_TYPE_RESEARCHER",(function(){return m})),r.d(t,"DEFAULT_QUOTA_NAMESPACE",(function(){return f})),r.d(t,"DEFAULT_USER_GROUP_SPEC_NAME",(function(){return h})),r.d(t,"researcherTemplate",(function(){return g}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:e.$t("user.userName")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}}),r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" "+e._s(e.$t("user.search"))+" ")]),e._e(),r("el-button",{staticClass:"fr",staticStyle:{"margin-left":"10px"},attrs:{type:"default",icon:"el-icon-refresh-left"},on:{click:e.refresh}},[e._v(" "+e._s(e.$t("userGroup.refresh"))+" ")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"margin-top":"20px"},attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),r("el-table-column",{attrs:{label:e.$t("user.userName")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.userName)+" ")]}}])}),r("el-table-column",{attrs:{label:e.$t("user.groupName")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.groups,(function(t){return r("div",{key:t,staticClass:"mr2"},[e._v(e._s(t))])}))}}])}),r("el-table-column",{attrs:{label:e.$t("user.userType")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(a.apiRoles,(function(t){return r("div",{key:t,staticClass:"mr2"},[e._v(e._s(t))])}))}}])}),r("el-table-column",{attrs:{label:e.$t("user.roles"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,(function(t){return r("div",{key:t.namespace},[e._v(" "+e._s(t.namespace)+": "+e._s((t.roleNames||[]).join(","))+" ")])}))}}])}),r("el-table-column",{attrs:{label:e.$t("user.clusterRoles")},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.clusterRoles,(function(t){return r("div",{key:t},[e._v(e._s(t))])}))}}])}),r("el-table-column",{attrs:{"class-name":"status-col",label:e.$t("user.kubeConfig")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{type:"primary"},on:{click:function(r){return e.downloadKubeConfig(t.row)}}},[e._v(e._s(e.$t("user.download")))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",label:e.$t("user.bearerToken")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{type:"primary"},on:{click:function(r){return e.copyBearerToken(t.row)}}},[e._v(e._s(e.$t("user.copyToken")))])]}}])}),r("el-table-column",{attrs:{label:e.$t("user.createTime")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("parseTime")(t.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),r("el-table-column",{attrs:{label:e.$t("user.operator"),align:"center",width:"160","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v(" "+e._s(e.$t("user.edit"))+" ")]),e._e()]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length > 0"}],attrs:{total:e.list.length,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.fetchData}}),r("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"dataForm",staticStyle:{"margin-left":"20px"},attrs:{model:e.researcher,"label-position":"left","label-width":"120px"}},[r("el-form-item",{attrs:{label:e.$t("user.userName"),rules:{required:!0,message:e.$t("user.userNameEmptyNotice"),trigger:"blur"}}},["update"===e.dialogStatus?r("el-input",{model:{value:e.researcher.userName,callback:function(t){e.$set(e.researcher,"userName",t)},expression:"researcher.userName"}}):r("el-select",{attrs:{placeholder:e.$t("user.userNameNotice"),filterable:"","allow-create":""},on:{change:function(t){return e.syncUserId(e.researcher)}},model:{value:e.researcher.userName,callback:function(t){e.$set(e.researcher,"userName",t)},expression:"researcher.userName"}},e._l(e.userNameList,(function(e){return r("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userName}})})),1)],1),r("el-form-item",{attrs:{label:e.$t("user.userType"),prop:"apiRoles",rules:{required:!0,message:e.$t("user.userTypeEmptyNotice"),trigger:"blur"}}},[r("el-select",{attrs:{placeholder:e.$t("user.userTypeNotice")},model:{value:e.researcher.apiRoles[0],callback:function(t){e.$set(e.researcher.apiRoles,0,t)},expression:"researcher.apiRoles[0]"}},e._l(e.apiRoleList,(function(e){return r("el-option",{key:e.id,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:e.$t("user.groupName"),prop:"groups",rules:{required:!0,validator:e.userGroupValidator,message:e.$t("user.groupEmptyNotice"),trigger:"blur"}}},[r("el-select",{attrs:{placeholder:e.$t("user.clusterRoleNotice"),multiple:""},on:{change:function(t){return e.sycnRoleNamespaceByGroup(e.researcher)}},model:{value:e.researcher.groups,callback:function(t){e.$set(e.researcher,"groups",t)},expression:"researcher.groups"}},e._l(e.userGroupList,(function(e){return r("el-option",{key:e.metadata.uid,attrs:{label:e.spec.groupName,value:e.spec.groupName}})})),1)],1),r("el-form-item",{attrs:{label:e.$t("user.quota")}},[r("el-select",{attrs:{multiple:""},model:{value:e.researcher.roleNamespaces,callback:function(t){e.$set(e.researcher,"roleNamespaces",t)},expression:"researcher.roleNamespaces"}},e._l(e.filterNamespaceByGroup(e.researcher),(function(e){return r("el-option",{key:e.id,attrs:{label:e,value:e}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.cancelEdit()}}},[e._v(" "+e._s(e.$t("user.cancel"))+" ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(" "+e._s(e.$t("user.save"))+" ")])],1)],1)],1)},s=[],i=r("2909"),n=(r("e9c4"),r("d3b7"),r("4ec9"),r("3ca3"),r("ddb0"),r("d81d"),r("b0c0"),r("0481"),r("4069"),r("99af"),r("4de4"),r("a434"),r("2b3d"),r("9861"),r("c740"),r("bc3a")),u=r.n(n),o=r("d3a2"),c=r("4820"),l=r("ed08"),d=r("333d"),p="admin",m="researcher",f="default-group",h="defaultUserGroup",g={id:void 0,uid:"",userName:"",apiRoles:[m],groups:[h],aliuid:"",namespace:void 0,kubeConfig:"",status:"",roleNamespaces:[f]},b={name:"ResearcherList",components:{Pagination:d["a"]},filters:{parseTime:l["d"]},data:function(){var e=this;return{userGroupValidator:function(t,r,a){Object(l["b"])(r)?a(new Error(e.$t("user.groupEmptyNotice"))):a()},roleNamesValidate:function(t,r,a){Object(l["b"])(r)?a(new Error(e.$t("user.roleEmptyNotice"))):a()},list:[],listLoading:!0,listQuery:{page:1,limit:20,userName:void 0},researcher:JSON.parse(JSON.stringify(g)),dialogFormVisible:!1,dialogStatus:"",textMap:{update:this.$t("user.editUser"),create:this.$t("user.addUser")},groupNamespaces:{},userNameList:[],ramUserList:[],userGroupList:[],apiRoleList:[p,m]}},created:function(){console.log("researcher created"),this.fetchData(),this.fetchQuotaNamespaces(),this.fetchUserNameList(),this.fetchUserGroupList()},methods:{fetchData:function(){var e=this;this.listLoading=!0,u.a.all([Object(o["f"])(this.listQuery),Object(c["c"])({page:1,limit:1e6})]).then(u.a.spread((function(t,r){if(!Object(l["b"])(t.data.items)){e.userGroupList=r.data.items||[];var a=new Map(e.userGroupList.map((function(e){return[e.metadata.name,e.spec.groupName]})));e.list=t.data.items.map((function(e){return Object(o["c"])(e)})).map((function(t){return e.groupNameToSpecName(t,a)})).map((function(t){return e.addRoleNamespaces(t)})),e.refreshUserNameList(e.ramUserList,e.list)}}))).catch((function(t){e.$notify({title:e.$t("user.retry"),message:e.$t("user.getUserFailed")+","+t,type:"error",duration:3e3})})).finally((function(){e.listLoading=!1}))},refresh:function(){this.listQuery.userName=void 0,this.fetchData()},sycnRoleNamespaceByGroup:function(e){var t=this;Object(l["b"])(this.groupNamespaces)||(e.roleNamespaces=e.groups.map((function(e){return Object(l["b"])(t.groupNamespaces[e])?[]:Object(i["a"])(t.groupNamespaces[e])})).flat())},filterNamespaceByGroup:function(e){var t=this,r=[];if(!Object(l["b"])(this.groupNamespaces)){var a=e.groups.map((function(e){return Object(l["b"])(t.groupNamespaces[e])?[]:Object(i["a"])(t.groupNamespaces[e])})).flat();r=r.concat(a)}return r.filter((function(e,t,r){return r.indexOf(e)===t}))},fetchQuotaNamespaces:function(){var e=this;Object(c["d"])().then((function(t){t&&1e4===t.code&&(e.groupNamespaces=t.data)})).finally((function(){e.listLoading=!1}))},fetchUserNameList:function(){var e=this;Object(o["e"])().then((function(t){e.userNameList=t.data})).catch((function(t){console.log("fetch user name list error",t),e.userNameList=[]}))},fetchUserGroupList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5;Object(c["c"])({page:t,limit:r}).then((function(t){e.userGroupList=t.data.items||[]}))},resetListQuery:function(){this.listQuery.userName=void 0},findAliuidByName:function(e){var t=new Map(this.ramUserList.map((function(e){return[e.userName,e.userId]})));return t.get(e)},syncUserId:function(e){this.researcher.aliuid=this.findAliuidByName(e.userName),this.refreshApiRoles(e),Object(l["b"])(this.researcher.aliuid)&&(this.researcher.apiRoles=[m])},cancelEdit:function(){this.fetchData(),this.dialogFormVisible=!1},handleFilter:function(){this.listLoading=!0,this.fetchData()},refreshUserNameList:function(e,t){var r=t.map((function(e){return e.userName}));this.userNameList=e.filter((function(e){return r.indexOf(e.userName)<1}))},addRoleNamespaces:function(e){return e&&e.roles&&(e.roleNamespaces=e.roles.map((function(e){return e.namespace}))),e},groupNameToSpecName:function(e,t){return e.groups=e.groups.map((function(e){return t.get(e)})),e},getUserNameList:function(){var e=this;u.a.all([Object(o["e"])(),Object(o["f"])(this.listQuery),Object(c["c"])({page:1,limit:1e6})]).then(u.a.spread((function(t,r,a){if(e.ramUserList=t.data,e.userGroupList=a.data.items||[],!Object(l["b"])(r.data.items)&&!Object(l["b"])(e.userGroupList)){var s=new Map(e.userGroupList.map((function(e){return[e.metadata.name,e.spec.groupName]})));e.list=r.data.items.map((function(e){return Object(o["c"])(e)})).map((function(t){return e.groupNameToSpecName(t,s)})).map((function(t){return e.addRoleNamespaces(t)})),e.refreshUserNameList(e.ramUserList,e.list)}}))).catch((function(t){e.$notify({title:e.$t("user.retry"),message:e.$t("user.getDataFailed")+","+t,type:"error",duration:3e3})}))},handleCreate:function(){var e=this;this.researcher=JSON.parse(JSON.stringify(g)),this.sycnRoleNamespaceByGroup(this.researcher),this.refreshApiRoles(),this.dialogStatus="create",this.dialogFormVisible=!0,this.refreshUserList(),this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},refreshUserList:function(){var e=this;this.resetListQuery(),Object(l["b"])(this.groupNamespaces)&&this.fetchQuotaNamespaces(),(void 0===this.ramUserList||this.ramUserList.length<1)&&(void 0===this.list||this.list.length<1)?this.getUserNameList():void 0===this.ramUserList||this.ramUserList.length<1?Object(o["e"])().then((function(t){void 0!==t.data&&(e.ramUserList=t.data,e.refreshUserNameList(e.ramUserList,e.list))})).catch((function(){e.userNameList=[]})):void 0===this.list||this.list.length<1?this.fetchData():this.refreshUserNameList(this.ramUserList,this.list)},refreshApiRoles:function(e){!Object(l["b"])(e)&&Object(l["b"])(e.aliuid)?this.apiRoleList=[m]:this.apiRoleList=[p,m]},handleUpdate:function(e){var t=this;this.refreshUserList(),this.refreshApiRoles(e),this.researcher=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleDelete:function(e,t){var r=this;this.researcher=Object.assign({},e);var a=this.resetUserGroupNameAndRoles(this.researcher,this.userGroupList);Object(o["b"])(a).then((function(){r.list.splice(t,1),r.$notify({title:r.$t("user.success"),message:r.$t("user.deleteSuccess"),type:"success",duration:2e3})})).catch((function(e){r.$notify({title:r.$t("user.retry"),message:r.$t("user.deleteFailed")+","+e,type:"error",duration:2e3})})).finally((function(){r.dialogFormVisible=!1,r.listLoading=!1}))},copyBearerToken:function(e){var t=this;Object(o["g"])(e).then((function(e){if(e&&e.data&&1e4===e.data.code){var r=document.createElement("textarea");r.value=e.data.data,document.body.appendChild(r),r.setAttribute("type","text"),r.select();var a=document.execCommand("copy");document.body.removeChild(r),a?t.$message({message:t.$t("user.tokenCopyedSuccess"),type:"success"}):t.$message({message:t.$t("user.tokenCopyedFailed"),type:"error"})}else t.$notify({title:t.$t("user.getTokenFailed"),message:e.data,type:"error",duration:2e3})})).catch((function(e){t.$notify({title:t.$t("user.refresh"),message:e,type:"error",duration:2e3})}))},downloadKubeConfig:function(e){Object(o["d"])(e).then((function(e){var t=e.headers["x-suggested-filename"].split(",")[0],r=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=r,a.setAttribute("download",t),document.body.appendChild(a),a.click()}))},resetUserGroupNameAndRoles:function(e,t){var r=JSON.parse(JSON.stringify(e));return Object(l["b"])(e.groups)||(r.groups=t.filter((function(t){return e.groups.indexOf(t.spec.groupName)>=0})).map((function(e){return e.metadata.name}))),r},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var r=e.resetUserGroupNameAndRoles(e.researcher,e.userGroupList);Object(o["a"])(r).then((function(t){if(null!==t&&void 0!==t.data){var r=Object(o["c"])(t.data);e.list.unshift(r)}e.dialogFormVisible=!1,e.fetchData(),e.$notify({title:e.$t("user.success"),message:e.$t("user.createSuccess"),type:"success",duration:2e3})})).catch((function(t){e.$notify({title:e.$t("user.refresh"),message:e.$t("user.createFailed")+","+t,type:"error",duration:2e3})})).finally((function(){e.dialogFormVisible=!1,e.listLoading=!1}))}}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var r=e.resetUserGroupNameAndRoles(e.researcher,e.userGroupList);Object(o["h"])(r).then((function(){var t=e.list.findIndex((function(t){return t.uid===e.researcher.uid}));e.list.splice(t,1,e.researcher),e.fetchData(),e.$notify({title:e.$t("user.success"),message:e.$t("user.updateSuccess"),type:"success",duration:2e3})})).catch((function(t){e.$notify({title:e.$t("user.refresh"),message:e.$t("user.updateFailed")+","+t,type:"error",duration:2e3})})).finally((function(){e.dialogFormVisible=!1,e.listLoading=!1}))}}))}}},N=b,y=(r("9367"),r("2877")),v=Object(y["a"])(N,a,s,!1,null,"6942c796",null);t["default"]=v.exports},"333d":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[r("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},s=[];r("a9e3");Math.easeInOutQuad=function(e,t,r,a){return e/=a/2,e<1?r/2*e*e+t:(e--,-r/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function u(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,r){var a=u(),s=e-a,o=20,c=0;t="undefined"===typeof t?500:t;var l=function e(){c+=o;var u=Math.easeInOutQuad(c,a,s,t);n(u),c<t?i(e):r&&"function"===typeof r&&r()};l()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&o(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&o(0,800)}}},l=c,d=(r("5660"),r("2877")),p=Object(d["a"])(l,a,s,!1,null,"6af373ef",null);t["a"]=p.exports},4820:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return d}));r("b0c0");var a=r("b775"),s=r("ed08");function i(e,t){var r=e.spec;if(Object(s["b"])(r))return{name:"",userNames:[],quotaNames:""};var a=r.groupName;return{metaName:e.metadata.name,metaNamepace:e.metadata.namespace,name:a,userNames:t,quotaNames:Object(s["b"])(r.quotaNames)?"":r.quotaNames[0]}}function n(e){var t=Object(s["b"])(e.metaName)?e.name:e.metaName,r=Object(s["b"])(e.metaNamespace)?"kube-ai":e.metaNamespace,a={kind:"UserGroup",apiVersion:"data.kubeai.alibabacloud.com/v1",metadata:{name:t,namespace:r},spec:{groupName:e.name}};return e.quotaNames&&(a.spec.quotaNames=e.quotaNames.constructor===Array?e.quotaNames:[e.quotaNames]),a}function u(e){return Object(a["a"])({url:"/user_group/list",method:"get",params:e})}function o(e,t){var r=n(e);return Object(a["a"])({url:"/user_group/create",method:"post",data:{userGroup:r,userNames:t}})}function c(e,t){var r={userGroup:n(e),users:t};return Object(a["a"])({url:"/user_group/update",method:"put",data:r})}function l(e){var t=n(e);return Object(a["a"])({url:"/user_group/delete",method:"put",data:t})}function d(e){return Object(a["a"])({url:"/user_group/get_group_namespaces",method:"get",params:e})}},5660:function(e,t,r){"use strict";r("7a30")},"7a30":function(e,t,r){},9367:function(e,t,r){"use strict";r("e126")},d3a2:function(e,t,r){"use strict";r.d(t,"c",(function(){return m})),r.d(t,"e",(function(){return f})),r.d(t,"g",(function(){return h})),r.d(t,"f",(function(){return g})),r.d(t,"d",(function(){return b})),r.d(t,"b",(function(){return N})),r.d(t,"h",(function(){return y})),r.d(t,"a",(function(){return v}));r("d81d"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("159b"),r("b0c0");var a=r("b775"),s=r("ed08"),i=r("bc3a"),n=r.n(i),u="kubeai-admin-clusterrole",o="kubeai-researcher-role",c="kubeai-researcher-clusterrole",l="admin";function d(e){function t(e,t){return{roleName:e,namespace:t}}e=p(e);var r=[];Object(s["b"])(e.clusterRoles)||(r=e.clusterRoles.map((function(e){return t(e,null)})),r=Object(s["e"])(r,["roleName"]));var a=[];if(!Object(s["b"])(e.roles)&&!Object(s["b"])(e.roleNamespaces)){for(var i=0;i<e.roles.length;i++)for(var n=e.roles[i],u=0;u<e.roleNamespaces.length;u++){var o=e.roleNamespaces[u];a.push({namespace:o,roleName:n})}a=Object(s["e"])(a,["namespace","roleName"])}var c={metadata:{name:e.uid},spec:{userName:e.userName,apiRoles:e.apiRoles.constructor===Array?e.apiRoles:[e.apiRoles],groups:e.groups||[],uid:e.uid,aliuid:e.aliuid,k8sServiceAccount:{roleBindings:a,clusterRoleBindings:r}}};return c}function p(e){var t=[],r=[];return r.push(o),t.push(c),e.apiRoles.indexOf(l)>=0&&(t.push(u),r.push(o)),e.roles=r,e.clusterRoles=t,e}function m(e){var t,r,a=e.spec,i=e.metadata;function n(e){var t=[];if(Object(s["b"])(e))return t;t=new Map;for(var r=0;r<e.length;r++){var a=e[r].namespace;t.has(a)||t.set(a,[]),t.get(a).push(e[r].roleName)}var i=[];return t.forEach((function(e,t){return i.push({namespace:t,roleNames:e})})),i}Object(s["b"])(a.k8sServiceAccount)||Object(s["b"])(a.k8sServiceAccount.clusterRoleBindings)||(t=a.k8sServiceAccount.clusterRoleBindings.map((function(e){return e.roleName}))),Object(s["b"])(a.k8sServiceAccount)||Object(s["b"])(a.k8sServiceAccount.roleBindings)||(r=n(a.k8sServiceAccount.roleBindings));var u={userName:a.userName,uid:i.name,aliuid:a.aliuid,apiRoles:a.apiRoles,clusterRoles:t,groups:a.groups||[],roles:r,createTime:i.creationTimestamp};return u}function f(){return Object(a["a"])({url:"/user/list/ramUsers",method:"get"})}function h(e){var t={userId:e.uid};return n()({url:"/researcher/getBearerToken",method:"GET",params:t})}function g(e){return Object(a["a"])({url:"/researcher/list",method:"get",params:e})}function b(e){var t={userId:e.uid,namespace:e.namespace};return n()({url:"/researcher/download/kubeconfig",method:"GET",responseType:"blob",params:t})}function N(e){var t=d(e);return Object(a["a"])({url:"/researcher/delete",method:"put",data:t})}function y(e){var t=d(e);return Object(a["a"])({url:"/researcher/update",method:"put",data:t})}function v(e){var t=d(e);return Object(a["a"])({url:"/researcher/create",method:"post",data:t})}},e126:function(e,t,r){}}]);