(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"14J3":function(e,t,a){"use strict";a("EFp3"),a("1GLa")},"422Q":function(e,t,a){"use strict";a.r(t);var n=a("k1fw"),r=(a("IzEo"),a("bx4M")),c=(a("+L6B"),a("2/Rp")),s=(a("14J3"),a("BMrR")),i=(a("jCWc"),a("kPKH")),o=(a("/zsF"),a("PArb")),d=(a("5NDa"),a("5rEg")),l=(a("miYZ"),a("tsqr")),u=(a("fOrg"),a("+KLJ")),p=a("qLMh"),b=a("9og8"),j=(a("y8nQ"),a("Vl3Y")),h=a("tJVT"),m=(a("OaEy"),a("2fM7")),f=a("rLCj"),O=a("9kvl"),g=a("q1tI"),x=a("/MKj"),v=a("Hx5s"),w=a("qRyz"),y=a("t3Un"),M=a("Qyje"),k=a.n(M),C="/api/v1";function q(e){return I.apply(this,arguments)}function I(){return I=Object(b["a"])(Object(p["a"])().mark((function e(t){return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y["a"])("".concat(C,"/datasource"),{method:"POST",body:k.a.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}));case 1:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}var _=a("nKUr"),F=(a("33yf"),m["a"].Option),z=function(e){e.globalConfig,e.namespaces;var t=e.currentUser,a="/root/data/",x=Object(g["useState"])([]),y=Object(h["a"])(x,2),M=y[0],k=y[1],C=Object(g["useState"])(!0),I=Object(h["a"])(C,2),z=(I[0],I[1]),E=Object(g["useState"])(""),L=Object(h["a"])(E,2),A=L[0],J=L[1],R=Object(O["h"])(),S=j["a"].useForm(),U=Object(h["a"])(S,1),B=U[0];Object(g["useEffect"])((function(){J("https://cs.console.aliyun.com/"),P()}),[]);var T={name:"",description:"",type:"",namespace:"",pvc_name:"",local_path:""},K={labelCol:{span:"zh-CN"===Object(O["d"])()?4:5},wrapperCol:{span:"zh-CN"===Object(O["d"])()?20:19}},P=function(){var e=Object(b["a"])(Object(p["a"])().mark((function e(){var t,a;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(z(!0),t=B.getFieldValue("namespace"),""==t){e.next=9;break}return e.next=5,Object(w["c"])(t);case 5:a=e.sent,"200"!=a.code?k([]):k(a.data),e.next=10;break;case 9:k([]);case 10:z(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=Object(_["jsx"])(u["a"],{type:"info",showIcon:!0,message:Object(_["jsxs"])("span",{children:[R.formatMessage({id:"dlc-dashboard-prompt-1"}),Object(_["jsx"])("a",{href:A,target:"_blank",children:R.formatMessage({id:"dlc-dashboard-ack-cluster"})}),R.formatMessage({id:"dlc-dashboard-prompt-2"}),Object(_["jsx"])("a",{href:"https://help.aliyun.com/document_detail/86545.html",target:"_blank",children:R.formatMessage({id:"dlc-dashboard-guidance-document"})}),R.formatMessage({id:"dlc-dashboard-prompt-3"})]})}),N=Object(g["useState"])(!1),W=Object(h["a"])(N,2),Y=W[0],H=W[1],Q=function(e){var a,n;H(!0);var r={userid:null!==(a=t.loginId)&&void 0!==a?a:"",username:null!==(n=t.loginName)&&void 0!==n?n:"",name:e.name,type:"",description:e.description,namespace:e.namespace,pvc_name:e.pvc_name,local_path:Z(e.local_path)};q(r).then((function(e){l["default"].success(R.formatMessage({id:"dlc-dashboard-add-success"})),H(!1),O["e"].push({pathname:"/datasheets",query:{}})})).catch((function(e){H(!1)}))},Z=function(e){if(""===e)return a;var t=e;return e.endsWith("/")||(t=e+"/"),t},G=function(e){k([]),J("https://cs.console.aliyun.com"),P()};return Object(_["jsx"])(v["a"],{title:Object(_["jsx"])(_["Fragment"],{}),children:Object(_["jsx"])(j["a"],Object(n["a"])(Object(n["a"])({initialValues:T,form:B},K),{},{labelAlign:"left",onFinish:Q,children:Object(_["jsx"])(s["a"],{gutter:[24,24],children:Object(_["jsx"])(i["a"],{span:18,offset:3,children:Object(_["jsxs"])(r["a"],{style:{marginBottom:12},title:R.formatMessage({id:"dlc-dashboard-new-data-config"}),children:[Object(_["jsx"])(j["a"].Item,{name:"name",required:!0,label:R.formatMessage({id:"dlc-dashboard-name"}),rules:[{required:!0,message:R.formatMessage({id:"dlc-dashboard-please-enter-name"})},{pattern:"^[0-9a-zA-Z-]{1,32}$",message:R.formatMessage({id:"dlc-dashboard-name-rules"})}],children:Object(_["jsx"])(d["a"],{})}),Object(_["jsx"])(j["a"].Item,{name:"description",label:R.formatMessage({id:"dlc-dashboard-description"}),children:Object(_["jsx"])(d["a"],{})}),Object(_["jsx"])(j["a"].Item,{name:"namespace",required:!0,label:R.formatMessage({id:"dlc-dashboard-namespace"}),rules:[{required:!0,message:R.formatMessage({id:"dlc-dashboard-please-enter-namespace"})}],children:Object(_["jsx"])(m["a"],{placeholder:"",onChange:G,children:t.namespaces&&t.namespaces.length>0&&t.namespaces.map((function(e){return Object(_["jsx"])(F,{value:e,children:e},e)}))})}),Object(_["jsx"])(j["a"].Item,{name:"pvc_name",required:!0,label:R.formatMessage({id:"dlc-dashboard-persistent-volume-claim"}),rules:[{required:!0,message:R.formatMessage({id:"dlc-dashboard-please-enter-storage-volume"})}],children:Object(_["jsx"])(m["a"],{placeholder:"",notFoundContent:Object(_["jsx"])("span",{children:R.formatMessage({id:"dlc-dashboard-no-pvc-prompt"})}),dropdownRender:function(e){return Object(_["jsxs"])("div",{children:[e,Object(_["jsx"])(o["a"],{style:{margin:"4px 0"}}),Object(_["jsx"])("div",{style:{textAlign:"center"},children:Object(_["jsxs"])("a",{onClick:function(){return P()},children:[Object(_["jsx"])(f["a"],{})," ",R.formatMessage({id:"dlc-dashboard-reload"})]})})]})},children:M instanceof Array&&M.map((function(e){return Object(_["jsx"])(m["a"].Option,{title:e,value:e,children:e})}))})}),Object(_["jsxs"])(j["a"].Item,{label:R.formatMessage({id:"dlc-dashboard-local-paths"}),children:[Object(_["jsx"])(j["a"].Item,{name:"local_path",noStyle:!0,children:Object(_["jsx"])(s["a"],{gutter:[24,24],children:Object(_["jsx"])(i["a"],{span:24,children:Object(_["jsx"])(d["a"],{placeholder:a})})})}),V]}),Object(_["jsx"])(j["a"].Item,{wrapperCol:{span:3,offset:21},children:Object(_["jsx"])(c["a"],{type:"primary",htmlType:"submit",loading:Y,children:R.formatMessage({id:"dlc-dashboard-submit"})})})]})})})}))})};t["default"]=Object(x["c"])((function(e){var t=e.global,a=e.user;return{globalConfig:t.config,namespaces:t.namespaces,currentUser:a.currentUser}}))(z)},BMrR:function(e,t,a){"use strict";var n=a("qrJ5");t["a"]=n["a"]},IzEo:function(e,t,a){"use strict";a("EFp3"),a("lnY3"),a("cWXX"),a("Znn+")},jCWc:function(e,t,a){"use strict";a("EFp3"),a("1GLa")},kPKH:function(e,t,a){"use strict";var n=a("/kpp");t["a"]=n["a"]},lnY3:function(e,t,a){},qRyz:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return b}));var n=a("qLMh"),r=a("9og8"),c=a("t3Un"),s="/api/v1";function i(e,t){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(Object(n["a"])().mark((function e(t,a){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["a"])("".concat(s,"/job/submit"),{method:"POST",params:{kind:a},data:t}));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function d(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(Object(n["a"])().mark((function e(t){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["a"])("".concat(s,"/pvc/list"),{params:{namespace:t}}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["a"])("".concat(s,"/datasource")));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function b(){return j.apply(this,arguments)}function j(){return j=Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(c["a"])("".concat(s,"/codesource")));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}},rLCj:function(e,t,a){"use strict";var n=a("wx14"),r=a("q1tI"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},s=c,i=a("6VBw"),o=function(e,t){return r["createElement"](i["a"],Object(n["a"])({},e,{ref:t,icon:s}))},d=r["forwardRef"](o);t["a"]=d}}]);