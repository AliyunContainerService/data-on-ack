(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"14J3":function(e,a,t){"use strict";t("EFp3"),t("1GLa")},BMrR:function(e,a,t){"use strict";var r=t("qrJ5");a["a"]=r["a"]},IzEo:function(e,a,t){"use strict";t("EFp3"),t("lnY3"),t("cWXX"),t("Znn+")},d2BQ:function(e,a,t){"use strict";t.r(a);var r=t("k1fw"),s=(t("IzEo"),t("bx4M")),c=(t("+L6B"),t("2/Rp")),n=(t("BoS7"),t("Sdc0")),i=(t("14J3"),t("BMrR")),d=(t("jCWc"),t("kPKH")),l=(t("5NDa"),t("5rEg")),o=(t("fOrg"),t("+KLJ")),u=(t("miYZ"),t("tsqr")),p=(t("y8nQ"),t("Vl3Y")),b=t("tJVT"),h=t("q1tI"),m=t.n(h),j=t("/MKj"),f=t("9kvl"),g=t("Hx5s"),O=t("qLMh"),x=t("9og8"),v=t("t3Un"),w=t("Qyje"),M=t.n(w),y="/api/v1";function C(e){return I.apply(this,arguments)}function I(){return I=Object(x["a"])(Object(O["a"])().mark((function e(a){return Object(O["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(v["a"])("".concat(y,"/codesource"),{method:"POST",body:M.a.stringify(a),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}));case 1:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}var q=t("3S7+"),_=t("i5Jm"),F=t("nKUr"),z=function(e){e.globalConfig;var a=e.currentUser,t="/root/",j=Object(f["h"])(),O=p["a"].useForm(),x=Object(b["a"])(O,1),v=x[0],w={name:"",description:"",code_path:"",default_branch:"",local_path:"",privateGit:{enabled:!1,user:"",password:""}},M=function(e){if(e&&""!==e){var a=e.lastIndexOf("/"),t=e.substring(a+1,e.length);return-1!=t.indexOf(".git")?t.split(".")[0]:e.substring(a+1,e.length)}return""},y={labelCol:{span:"zh-CN"===Object(f["d"])()?4:5},wrapperCol:{span:"zh-CN"===Object(f["d"])()?20:19}},I=Object(h["useState"])(!1),z=Object(b["a"])(I,2),V=z[0],k=z[1],G=function(e){var t,r;k(!0);var s={userid:null!==(t=a.loginId)&&void 0!==t?t:"",username:null!==(r=a.loginName)&&void 0!==r?r:"",name:e.name,type:"git",description:e.description,code_path:e.code_path,default_branch:e.default_branch,local_path:B(e.local_path),gitUsername:e.privateGit.user,gitPassword:e.privateGit.password};C(s).then((function(e){u["default"].success(j.formatMessage({id:"dlc-dashboard-add-success"})),k(!1),f["e"].push({pathname:"/datasheets",query:{}})})).catch((function(e){k(!1)}))},B=function(e){if(""===e)return t;var a=e;return e.endsWith("/")||(a=e+"/"),a},J=Object(F["jsx"])(o["a"],{type:"info",showIcon:!0,message:Object(F["jsxs"])("span",{children:[j.formatMessage({id:"dlc-dashboard-code-synchronization"}),"\xa0",v.getFieldValue("local_path")?B(v.getFieldValue("local_path"))+"code/":t+"code/",""!==M(v.getFieldValue("code_path"))&&M(v.getFieldValue("code_path")),"\xa0",j.formatMessage({id:"dlc-dashboard-under-contents"})]})});o["a"],j.formatMessage({id:"dlc-dashboard-git-prompt-1"}),j.formatMessage({id:"dlc-dashboard-guidance-document"}),j.formatMessage({id:"dlc-dashboard-public-key"}),j.formatMessage({id:"dlc-dashboard-download"});return Object(F["jsx"])(g["a"],{title:Object(F["jsx"])(F["Fragment"],{}),children:Object(F["jsx"])(p["a"],Object(r["a"])(Object(r["a"])({initialValues:w,form:v},y),{},{onFinish:G,labelAlign:"left",children:function(){return Object(F["jsx"])(m.a.Fragment,{children:Object(F["jsx"])(i["a"],{gutter:[24,24],children:Object(F["jsx"])(d["a"],{span:18,offset:3,children:Object(F["jsxs"])(s["a"],{style:{marginBottom:12},title:j.formatMessage({id:"dlc-dashboard-new-create-code-config"}),children:[Object(F["jsx"])(p["a"].Item,{required:!0,name:"name",label:j.formatMessage({id:"dlc-dashboard-name"}),rules:[{required:!0,message:j.formatMessage({id:"dlc-dashboard-please-enter-name"})},{pattern:"^[0-9a-zA-Z-]{1,32}$",message:j.formatMessage({id:"dlc-dashboard-name-rules"})}],children:Object(F["jsx"])(l["a"],{})}),Object(F["jsx"])(p["a"].Item,{name:"description",label:j.formatMessage({id:"dlc-dashboard-description"}),children:Object(F["jsx"])(l["a"],{})}),Object(F["jsx"])(p["a"].Item,{name:"code_path",required:!0,label:j.formatMessage({id:"dlc-dashboard-git-repository"}),rules:[{required:!0,message:j.formatMessage({id:"dlc-dashboard-please-enter-git-path"})}],children:Object(F["jsx"])(l["a"],{})}),Object(F["jsx"])(p["a"].Item,{label:j.formatMessage({id:"dlc-dashboard-default-branch"}),required:!0,children:Object(F["jsx"])(p["a"].Item,{name:"default_branch",noStyle:!0,rules:[{required:!0,message:j.formatMessage({id:"dlc-dashboard-please-enter-default-branch"})}],children:Object(F["jsx"])(l["a"],{style:{marginBottom:"10px"}})})}),Object(F["jsxs"])(p["a"].Item,{label:j.formatMessage({id:"dlc-dashboard-local-paths"}),children:[Object(F["jsx"])(p["a"].Item,{name:"local_path",noStyle:!0,children:Object(F["jsx"])(i["a"],{gutter:[24,24],children:Object(F["jsx"])(d["a"],{span:24,children:Object(F["jsx"])(l["a"],{placeholder:t})})})}),J]}),Object(F["jsx"])(p["a"].Item,{shouldUpdate:!0,noStyle:!0,children:function(){return Object(F["jsxs"])(p["a"].Item,{label:j.formatMessage({id:"Private Git"}),children:[Object(F["jsx"])(p["a"].Item,{name:["privateGit","enabled"],valuePropName:"checked",children:Object(F["jsx"])(n["a"],{})}),!0===v.getFieldValue(["privateGit","enabled"])&&Object(F["jsxs"])(m.a.Fragment,{children:[Object(F["jsx"])(p["a"].Item,{label:Object(F["jsxs"])(q["a"],{title:j.formatMessage({id:"private-git-user-prompt"}),children:[j.formatMessage({id:"private-git-user"})," ",Object(F["jsx"])(_["a"],{twoToneColor:"#faad14"})]}),name:["privateGit","user"],rules:[{required:!0,message:j.formatMessage({id:"private-git-required"})}],labelCol:{span:10},wrapperCol:{span:18},children:Object(F["jsx"])(l["a"],{placeholder:"user"})}),Object(F["jsx"])(p["a"].Item,{label:Object(F["jsxs"])(q["a"],{title:j.formatMessage({id:"private-git-password-prompt"}),children:[j.formatMessage({id:"private-git-password"})," ",Object(F["jsx"])(_["a"],{twoToneColor:"#faad14"})]}),name:["privateGit","password"],rules:[{required:!0,message:j.formatMessage({id:"private-git-required"})}],labelCol:{span:10},wrapperCol:{span:18},children:Object(F["jsx"])(l["a"].Password,{placeholder:"password"})})]})]})}}),Object(F["jsx"])(p["a"].Item,{wrapperCol:{span:3,offset:21},children:Object(F["jsx"])(c["a"],{type:"primary",htmlType:"submit",loading:V,children:j.formatMessage({id:"dlc-dashboard-submit"})})})]})})})})}}))})};a["default"]=Object(j["c"])((function(e){var a=e.global,t=e.user;return{globalConfig:a.config,currentUser:t.currentUser}}))(z)},i5Jm:function(e,a,t){"use strict";var r=t("wx14"),s=t("q1tI"),c={icon:function(e,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm0 632c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z",fill:a}},{tag:"path",attrs:{d:"M472 732a40 40 0 1080 0 40 40 0 10-80 0zm151.6-415.3C593.6 290.5 554 276 512 276s-81.6 14.4-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.2 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5 0-39.3-17.2-76-48.4-103.3z",fill:e}}]}},name:"question-circle",theme:"twotone"},n=c,i=t("6VBw"),d=function(e,a){return s["createElement"](i["a"],Object(r["a"])({},e,{ref:a,icon:n}))},l=s["forwardRef"](d);a["a"]=l},jCWc:function(e,a,t){"use strict";t("EFp3"),t("1GLa")},kPKH:function(e,a,t){"use strict";var r=t("/kpp");a["a"]=r["a"]},lnY3:function(e,a,t){}}]);